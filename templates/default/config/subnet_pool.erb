pool {
  <% if @extra_pool_lines -%>
  <% @extra_pool_lines = [@extra_pool_lines] if @extra_pool_lines.is_a?(String) -%>
  <% @extra_pool_lines.each do |line| -%>
  <%= line %>
  <% end -%>
  <% end -%>
  <% if @peer -%>
  failover peer "<%= node['domain'] %>";
  <% end -%>
  <% @range = [@range] if @range.is_a?(String) -%>
  <% @range.each do |range| -%>
  range <%= range %>;
  <% end -%>
  <% @deny.each do |denied| -%>
  deny <%= denied %>;
  <% end -%>
  <% @allow.each do |allowed| -%>
  allow <%= allowed %>;
  <% end -%>
}
