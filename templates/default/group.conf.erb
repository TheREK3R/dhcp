#
# Generated by Chef for <%= node['fqdn'] %>
# Do NOT modify this file by hand, changes will be overwritten.
#

# <%= @name -%><% if @comment -%><%= - @comment -%><% end -%>
group  {
<% unless nil_or_empty?(@parameters) -%> 

  # Parameters
  <% property_collection_sorted(@parameters).each do |parameter, value| -%>
  <%= parameter %><% unless nil_or_empty?(value) -%> <%= value %><% end -%>;
  <% end -%>
<% end -%>
<% unless nil_or_empty?(@options) -%>

  # Options
  <% property_collection_sorted(@options).each do |option, value| -%>
  <%= option %> <%= value %>;
  <% end -%>
<% end -%>
<% unless nil_or_empty?(@evals) -%>  

  # Evals
  <% @evals.each do |eval| -%>
  <%= eval %>
  <% end -%>
<% end -%>
<% unless nil_or_empty?(@evals) -%>

<% @hosts.sort.each do |host, data| -%>
  host <%= host %> {
    <%= data["identifier"] %>;
  <% if data.key?("ip") -%>
    <%= @ip_version.eql?(:ipv6) ? 'fixed-address6' : 'fixed-address' %> <%= data["ip"] %>;
  <% end -%>
  <% if data.key?("parameters") -%>

  # Parameters
  <% property_collection_sorted(data['parameters']).each do |parameter, value| -%>
    <%= parameter %><% unless nil_or_empty?(value) -%> <%= value %><% end -%>;;
  <% end -%>
  <% end -%>
  <% if data.key?("options") -%>

  # Options
  <% property_collection_sorted(data['options']).each do |option, value| -%>
    option <%= option %> <%= value %>;
  <% end -%>
  <% end -%>
  }
<% end -%>
<% end -%>
}
